# Platform.sh supports three "hooks", or points in the deployment of a new version of an
# application that you can inject a custom script into. Each runs at a different stage
# of the process.
# DOCS: https://docs.platform.sh/configuration/app/build.html#hooks
hooks:
    # The 'build' hook is run after the build flavor (if any). The file system is fully writable,
    # but no services (such as a database) are available nor are any persistent file mounts, as the
    # application has not yet been deployed.
    # DOCS: https://docs.platform.sh/configuration/app/build.html#build-hook
    build: |
        set -e
        dotnet publish --output "$PLATFORM_OUTPUT_DIR" -p:UseRazorBuildServer=false -p:UseSharedCompilation=false